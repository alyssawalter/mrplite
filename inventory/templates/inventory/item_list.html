{% extends 'adminlte/base.html' %}

{% block title %}Items{% endblock %}

{% block content %}
    <div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-sm-1">
                        <h1>Items</h1>
                    </div>
                    <div class="col-sm-1">
                        <a href="{% url 'inventory:create_item' %}" class="btn btn-primary">+ New Item</a>
                    </div>
                </div>

                <div class="card-body table-responsive p-0">
                    <table id="itemTable" class="table table-hover text-nowrap">
                        <thead>
                            <tr>
                                <th>
                                    Item SKU
                                    <div class="input-group input-group-sm" style="width: 150px;">
                                        <input type="text" id="search_sku" name="table_search_sku" class="form-control float-right" placeholder="Search SKU">
                                        <div class="input-group-append">
                                            <button id="btn_search_sku" type="submit" class="btn btn-default">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </th>
                                <th>
                                    Item Name
                                    <div class="input-group input-group-sm" style="width: 150px;">
                                        <input type="text" id="search_name" name="table_search_name" class="form-control float-right" placeholder="Search Name">
                                        <div class="input-group-append">
                                            <button id="btn_search_name" type="submit" class="btn btn-default">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </th>
                                <!-- Need to finish for other headers -->

                            </tr>
                        </thead>
                    <tbody>
                        {% for item in items %}
                        <tr>
                            <td><a href="{% url 'inventory:item_detail' pk=item.item_sku %}">{{ item.item_sku }}</a></td>
                            <td>{{ item.item_name }}</td>
                            <td>{{ item.item_group }}</td>
                            <td>{{ item.unit_of_measurement }}</td>
                            <td>{{ item.reorder_point }}</td>
                            <td>{{ item.selling_price }}</td>
                            <td>{{ item.manufactured }}</td>
                            <td>{{ item.min_qty_for_manufacturing }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
 <script>
 // Item sku
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('btn_search_sku').addEventListener('click', function () {
                searchTable('search_sku');
            });

            document.getElementById('search_sku').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    searchTable('search_sku');
                }
            });

            document.getElementById('btn_search_name').addEventListener('click', function () {
                searchTable('search_name');
            });

            document.getElementById('search_name').addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    searchTable('search_name');
                }
            });


            // Need to finish the above listeners for other search boxes and buttons

            function searchTable(inputId) {
                var input, filter, table, tr, td, i, txtValue;
                input = document.getElementById(inputId);
                filter = input.value.toUpperCase();
                table = document.getElementById('itemTable');
                tr = table.getElementsByTagName('tr');
                for (i = 0; i < tr.length; i++) {
                    td = tr[i].getElementsByTagName('td')[0];
                    if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = '';
                        } else {
                            tr[i].style.display = 'none';
                        }
                    }
                }
            }
        });
 </script>
{% endblock %}



